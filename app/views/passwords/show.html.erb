<%= link_to '← Back', root_path %>

<div class="flex justify-between">
  <h3> Password for: <span class="underline text-gray-500"><%= @password.url %></span></h2>
  <%= link_to 'Edit', edit_password_path if @password.editable_by? current_user %>
</div>

<h6> Username</h6>
<pre class="mt-0"><code><%= @password.username %></code></pre>
<h6>Password</h6>
<pre class="mt-0"><code><%= @password.password %></code></pre>

<%= link_to 'Share Password', new_password_share_path(@password) if @password.owned_by?(current_user) %>

<% if @password.users.count > 1 %>
  <h3>This password is shared with these PassVault users:</h3>
  <div class="">
    <% @password.user_passwords.includes(:user).each do |up| %>
      <div class="flex justify-between items-center">
        <div><%= up.user.email %></div>
        <div><%= up.role.capitalize %></div>
        <div>
          <%= button_to "Remove shared user", password_share_path(@password, up.user), method: :delete, data: {turbo_confirm: "Are you sure?"} if @password.owned_by?(current_user) %>
        </div>
      </div>
    <% end %>
  </div>
<% end %>